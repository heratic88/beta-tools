import{_ as f,o as n,c as l,a as d,e as a,f as m,g as u,w as g,d as _,h,t as v,p as y,i as b}from"./index.e4d354d5.js";const w={props:{imageUrl:String,xPercent:Number,yPercent:Number,alwaysVisible:Boolean},data(){return{visible:!1,imageLoaded:!1,dotPositioned:!1,imageWidth:null,imageHeight:null,offsetX:null,offsetY:null,startTime:null,duration:null}},computed:{isLoaded(){return this.imageLoaded&&this.dotPositioned},dotX(){return this.offsetX+this.imageWidth*(this.xPercent/100)-4},dotY(){return this.offsetY+this.imageHeight*(this.yPercent/100)-4},friendlyDuration(){if(!!this.duration)return`${(this.duration/1e3).toFixed(2)} sec`}},methods:{onLoad(){this.imageLoaded=!0,this.$nextTick(()=>{const e=this.$refs.image.getBoundingClientRect();this.imageWidth=e.width,this.imageHeight=e.height,this.offsetX=e.left,this.offsetY=e.top,this.positionDot()})},positionDot(){this.$refs.dot.style.left=`${this.dotX}px`,this.$refs.dot.style.top=`${this.dotY}px`,this.dotPositioned=!0},mouseDown(e){e.which===1?this.show():(this.hide(),this.duration=null)},show(){this.visible=!0,this.startTime=performance.now()},hide(){this.visible=!1,this.duration=performance.now()-this.startTime,this.startTime=null},touchStart(){this.visible=!0},clickImage(e){this.$emit("clickImage",e)}},watch:{xPercent(){this.positionDot()},yPercent(){this.positionDot()}}},c=e=>(y("data-v-ed94dbed"),e=e(),b(),e),x={class:"flex fixed items-center justify-center top-0 left-0 bottom-0 right-0"},p={key:0,class:"fixed top-0 left-0 bottom-0 right-0 z-40"},D=["src"],k={class:"dot",ref:"dot"},L={key:0,class:"text-white text-4xl"},P={key:1,class:"text-white text-2 fixed bottom-4 left-16 right-16 text-center"},S=h(" Focus your eyes on the red dot, then tap and hold to reveal the image "),I=c(()=>d("br",null,null,-1)),T=h(" Don't move your eyes! Let go as soon as you do "),V={key:0},Y=c(()=>d("br",null,null,-1));function B(e,i,r,N,o,t){return n(),l("div",null,[d("button",{class:"fixed top-0 left-0 bottom-0 right-0",onMousedown:i[2]||(i[2]=(...s)=>t.mouseDown&&t.mouseDown(...s)),onMouseup:i[3]||(i[3]=(...s)=>t.hide&&t.hide(...s)),onTouchstart:i[4]||(i[4]=u((...s)=>t.touchStart&&t.touchStart(...s),["prevent"])),onTouchend:i[5]||(i[5]=u((...s)=>t.hide&&t.hide(...s),["prevent"]))},[d("div",x,[r.alwaysVisible?a("",!0):(n(),l("div",p)),d("img",{src:r.imageUrl,class:m(["image object-cover overflow-hidden h-full z-20",{"opacity-0":!o.visible,"opacity-100":o.visible||r.alwaysVisible}]),onLoad:i[0]||(i[0]=(...s)=>t.onLoad&&t.onLoad(...s)),onClick:i[1]||(i[1]=(...s)=>t.clickImage&&t.clickImage(...s)),ref:"image"},null,42,D)])],32),g(d("div",k,null,512),[[_,o.dotPositioned&&!o.visible||r.alwaysVisible]]),t.isLoaded?a("",!0):(n(),l("div",L,"Loading, please wait...")),t.isLoaded&&!o.visible?(n(),l("div",P,[S,I,T,o.duration?(n(),l("div",V,[Y,h("You lasted "+v(t.friendlyDuration),1)])):a("",!0)])):a("",!0)])}const C=f(w,[["render",B],["__scopeId","data-v-ed94dbed"]]);export{C as R};
